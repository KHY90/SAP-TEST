<mvc:View
    controllerName="ui5.walkthrough.controller.MainPage"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:fb="sap.ui.comp.filterbar"
    xmlns:svm="sap.ui.comp.smartvariants"
    xmlns:core="sap.ui.core" 
    height="100%">
    <f:DynamicPage id="DynamicPageId"
        stickySubheaderProvider="iconTabBar"
        class="sapUiNoContentPadding"
        toggleHeaderOnTitleClick="{ViewModel>/titleClickable}"
        headerExpanded="{/headerExpanded}">
        <f:title>
            <f:DynamicPageTitle>
                <f:heading>
                    <svm:SmartVariantManagement id="svm" showExecuteOnSelection="true" />
                </f:heading>
                <f:expandedContent>
                    <Label id="expandedLabel" text="필터창" />
                </f:expandedContent>
                <f:snappedContent>
                    <Label id="snappedLabel" text="필터창" />
                </f:snappedContent>
            </f:DynamicPageTitle>
        </f:title>
        <f:header>
            <f:DynamicPageHeader>
                <f:content>
                    <!-- FilterBar 추가 -->
                    <fb:FilterBar id="filterbar" persistencyKey="myPersKey" useToolbar="false" search=".onSearch" filterChange=".onFilterChange" afterVariantLoad=".onAfterVariantLoad">
                        <fb:filterGroupItems>
                            <fb:FilterGroupItem name="Name" label="Name" groupName="Group1" visibleInFilterBar="true">
                                <fb:control>
                                    <MultiComboBox
                                        name="Name"
                                        selectionChange=".onSelectionChange"
                                        items="{
                                            path: '/ProductNames',
                                            templateShareable: true
                                        }">
                                        <core:Item key="{key}" text="{name}" />
                                    </MultiComboBox>
                                </fb:control>
                            </fb:FilterGroupItem>
                            <fb:FilterGroupItem name="Category" label="Category" groupName="Group1" visibleInFilterBar="true">
                                <fb:control>
                                    <MultiComboBox
                                        name="Category"
                                        selectionChange=".onSelectionChange"
                                        items="{
                                            path: '/ProductCategories',
                                            templateShareable: true
                                        }">
                                        <core:Item key="{key}" text="{name}" />
                                    </MultiComboBox>
                                </fb:control>
                            </fb:FilterGroupItem>
                            <fb:FilterGroupItem name="SupplierName" label="SupplierName" groupName="Group1" visibleInFilterBar="true">
                                <fb:control>
                                    <MultiComboBox
                                        name="SupplierName"
                                        selectionChange=".onSelectionChange"
                                        items="{
                                            path: '/ProductSuppliers',
                                            templateShareable: true
                                        }">
                                        <core:Item key="{key}" text="{name}" />
                                    </MultiComboBox>
                                </fb:control>
                            </fb:FilterGroupItem>
                        </fb:filterGroupItems>
                    </fb:FilterBar>
                </f:content>
            </f:DynamicPageHeader>
        </f:header>
        <f:content>
            <IconTabBar id="iconTabBar" class="sapUiResponsiveContentPadding">
                <items>
                    <IconTabFilter text="상품">
                        <Table id="idProductsTable"
                            mode="MultiSelect"
                            inset="false"
                            sticky="HeaderToolbar,ColumnHeaders"
                            items="{RequestModel>/}">
                            <headerToolbar>
                                <OverflowToolbar>
                                    <Title text="{i18n>headerTitle}" level="H2" />
                                    <ToolbarSpacer />
                                    <Button
                                        tooltip="Sort"
                                        icon="sap-icon://sort"
                                        press="handleSortButtonPressed" />
                                    <Button
                                        tooltip="Filter"
                                        icon="sap-icon://filter"
                                        press="handleFilterButtonPressed" />
                                    <Button
                                        tooltip="Group"
                                        icon="sap-icon://group-2"
                                        press="handleGroupButtonPressed" />
                                    <ToggleButton icon="sap-icon://menu" tooltip="Enable Custom Context Menu" press="onToggleContextMenu" />
                                </OverflowToolbar>
                            </headerToolbar>
                            <columns>
                                <Column>
                                    <Text text="{i18n>columnRequestNumber}" />
                                </Column>
                                <Column>
                                    <Text text="{i18n>columnProduct}" />
                                </Column>
                                <Column>
                                    <Text text="{i18n>columnQuantity}" />
                                </Column>
                                <Column>
                                    <Text text="{i18n>columnRequestor}" />
                                </Column>
                            </columns>
                            <items>
                                <ColumnListItem vAlign="Middle" press=".onRowPress">
                                    <cells>
                                        <Text text="{RequestModel>request_number}" />
                                        <Text text="{RequestModel>request_product}" />
                                        <Text text="{RequestModel>request_quantity}" />
                                        <Text text="{RequestModel>requestor}" />
                                    </cells>
                                </ColumnListItem>
                            </items>
                        </Table>
                    </IconTabFilter>
                    <IconTabFilter text="Attachments">
                        <Text text="Attachments go here ..." />
                    </IconTabFilter>
                    <IconTabFilter text="Notes">
                        <Text text="Notes go here ..." />
                    </IconTabFilter>
                </items>
            </IconTabBar>
        </f:content>
        <f:footer>
            <OverflowToolbar>
                <ToolbarSpacer />
                <Button type="Accept" text="{i18n>acceptButton}" />
                <Button type="Reject" text="{i18n>rejectButton}" />
            </OverflowToolbar>
        </f:footer>
    </f:DynamicPage>
</mvc:View>